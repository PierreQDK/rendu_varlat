# ğŸ“š Librairies
library(data.table)
library(ggplot2)
library(corrplot)
library(pls)
library(caret)
library(gridExtra)
library(FactoMineR)
library(factoextra)
library(data.table)
library(ggplot2)
library(gridExtra)
library(corrplot)

# ğŸ“¥ Lecture des donnÃ©es
upenn <- fread("UPENN.txt")
gt <- fread("GT.txt")

# âœ… CrÃ©ation de la variable cible : charge Ã©nergÃ©tique totale
upenn$EnergyLoad <- upenn$HeatTotal + upenn$CoolTotal
gt$EnergyLoad <- gt$HeatTotal + gt$CoolTotal

# âœ… Suppression de colonnes inutiles (ID, HeatTotal, CoolTotal)
Xupenn <- upenn[, !c("ID", "HeatTotal", "CoolTotal")]
Xgt <- gt[, !c("ID", "HeatTotal", "CoolTotal")]

# ğŸ” VÃ©rification structure
str(Xupenn)
summary(Xupenn$EnergyLoad)

# ğŸ“Š Histogramme de la variable cible
ggplot(Xupenn, aes(x = EnergyLoad)) +
  geom_histogram(bins = 30, fill = "steelblue", color = "white") +
  labs(title = "Distribution de la charge Ã©nergÃ©tique - UPENN")


---------------------------
  
# Quetsion 1 
  
upenn$sqrt_EnergyLoad <- sqrt(upenn$EnergyLoad)
upenn$sqrt_EnergyLoad <- sqrt(upenn$EnergyLoad)


# ğŸ” 4. Visualisation de la distribution des valeurs de Y (originale et transformÃ©e)
p1 <- ggplot(upenn, aes(x = EnergyLoad)) +
  geom_histogram(bins = 30, fill = "steelblue", color = "white") +
  labs(title = "Distribution de Y (EnergyLoad)", x = "EnergyLoad", y = "Count")

p2 <- ggplot(upenn, aes(x = sqrt_EnergyLoad)) +
  geom_histogram(bins = 30, fill = "darkgreen", color = "white") +
  labs(title = "Distribution de âˆšY", x = "âˆšEnergyLoad", y = "Count")

grid.arrange(p1, p2, ncol = 2)


# ğŸ§¼ 6. PrÃ©paration des matrices pour modÃ©lisation
# On retire les variables inutiles (ID, HeatTotal, CoolTotal)
Xtrain <- upenn[, !c("ID", "HeatTotal", "CoolTotal", "EnergyLoad")]
Xtest <- gt[, !c("ID", "HeatTotal", "CoolTotal", "EnergyLoad")]

# Structure des jeux
str(Xtrain)
str(Xtest)


